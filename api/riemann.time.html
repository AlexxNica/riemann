<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>riemann.time documentation</title></head><body><div id="header"><h1><a href="index.html">Riemann 0.2.13-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="riemann.bin.html"><span>riemann.bin</span></a></li><li><a href="riemann.blueflood.html"><span>riemann.blueflood</span></a></li><li><a href="riemann.boundary.html"><span>riemann.boundary</span></a></li><li><a href="riemann.campfire.html"><span>riemann.campfire</span></a></li><li><a href="riemann.cloudwatch.html"><span>riemann.cloudwatch</span></a></li><li><a href="riemann.common.html"><span>riemann.common</span></a></li><li><a href="riemann.config.html"><span>riemann.config</span></a></li><li><a href="riemann.core.html"><span>riemann.core</span></a></li><li><a href="riemann.datadog.html"><span>riemann.datadog</span></a></li><li><a href="riemann.deps.html"><span>riemann.deps</span></a></li><li><a href="riemann.druid.html"><span>riemann.druid</span></a></li><li><a href="riemann.elasticsearch.html"><span>riemann.elasticsearch</span></a></li><li><a href="riemann.email.html"><span>riemann.email</span></a></li><li><a href="riemann.expiration.html"><span>riemann.expiration</span></a></li><li><a href="riemann.folds.html"><span>riemann.folds</span></a></li><li><a href="riemann.graphite.html"><span>riemann.graphite</span></a></li><li><a href="riemann.hipchat.html"><span>riemann.hipchat</span></a></li><li><a href="riemann.index.html"><span>riemann.index</span></a></li><li><a href="riemann.influxdb.html"><span>riemann.influxdb</span></a></li><li><a href="riemann.instrumentation.html"><span>riemann.instrumentation</span></a></li><li><a href="riemann.kairosdb.html"><span>riemann.kairosdb</span></a></li><li><a href="riemann.keenio.html"><span>riemann.keenio</span></a></li><li><a href="riemann.librato.html"><span>riemann.librato</span></a></li><li><a href="riemann.logentries.html"><span>riemann.logentries</span></a></li><li><a href="riemann.logging.html"><span>riemann.logging</span></a></li><li><a href="riemann.logstash.html"><span>riemann.logstash</span></a></li><li><a href="riemann.mailgun.html"><span>riemann.mailgun</span></a></li><li><a href="riemann.nagios.html"><span>riemann.nagios</span></a></li><li><a href="riemann.opentsdb.html"><span>riemann.opentsdb</span></a></li><li><a href="riemann.opsgenie.html"><span>riemann.opsgenie</span></a></li><li><a href="riemann.pagerduty.html"><span>riemann.pagerduty</span></a></li><li><a href="riemann.plugin.html"><span>riemann.plugin</span></a></li><li><a href="riemann.pool.html"><span>riemann.pool</span></a></li><li><a href="riemann.prometheus.html"><span>riemann.prometheus</span></a></li><li><a href="riemann.pubsub.html"><span>riemann.pubsub</span></a></li><li><a href="riemann.pushover.html"><span>riemann.pushover</span></a></li><li><a href="riemann.query.html"><span>riemann.query</span></a></li><li><a href="riemann.repl.html"><span>riemann.repl</span></a></li><li><a href="riemann.service.html"><span>riemann.service</span></a></li><li><a href="riemann.shinken.html"><span>riemann.shinken</span></a></li><li><a href="riemann.slack.html"><span>riemann.slack</span></a></li><li><a href="riemann.sns.html"><span>riemann.sns</span></a></li><li><a href="riemann.stackdriver.html"><span>riemann.stackdriver</span></a></li><li><a href="riemann.streams.html"><span>riemann.streams</span></a></li><li><a href="riemann.test.html"><span>riemann.test</span></a></li><li class="current"><a href="riemann.time.html"><span>riemann.time</span></a></li><li><a href="riemann.time.controlled.html"><span>riemann.time.controlled</span></a></li><li><a href="riemann.transport.html"><span>riemann.transport</span></a></li><li><a href="riemann.transport.debug.html"><span>riemann.transport.debug</span></a></li><li><a href="riemann.transport.graphite.html"><span>riemann.transport.graphite</span></a></li><li><a href="riemann.transport.opentsdb.html"><span>riemann.transport.opentsdb</span></a></li><li><a href="riemann.transport.sse.html"><span>riemann.transport.sse</span></a></li><li><a href="riemann.transport.tcp.html"><span>riemann.transport.tcp</span></a></li><li><a href="riemann.transport.udp.html"><span>riemann.transport.udp</span></a></li><li><a href="riemann.transport.websockets.html"><span>riemann.transport.websockets</span></a></li><li><a href="riemann.twilio.html"><span>riemann.twilio</span></a></li><li><a href="riemann.victorops.html"><span>riemann.victorops</span></a></li><li><a href="riemann.xymon.html"><span>riemann.xymon</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="riemann.time.html#var--%3EEvery"><span>-&gt;Every</span></a></li><li><a href="riemann.time.html#var--%3EOnce"><span>-&gt;Once</span></a></li><li><a href="riemann.time.html#var-after%21"><span>after!</span></a></li><li><a href="riemann.time.html#var-cancel"><span>cancel</span></a></li><li><a href="riemann.time.html#var-defer"><span>defer</span></a></li><li><a href="riemann.time.html#var-every%21"><span>every!</span></a></li><li><a href="riemann.time.html#var-linear-time-real"><span>linear-time-real</span></a></li><li><a href="riemann.time.html#var-map-%3EEvery"><span>map-&gt;Every</span></a></li><li><a href="riemann.time.html#var-map-%3EOnce"><span>map-&gt;Once</span></a></li><li><a href="riemann.time.html#var-next-tick"><span>next-tick</span></a></li><li><a href="riemann.time.html#var-once%21"><span>once!</span></a></li><li><a href="riemann.time.html#var-poll-task%21"><span>poll-task!</span></a></li><li><a href="riemann.time.html#var-reset-tasks%21"><span>reset-tasks!</span></a></li><li><a href="riemann.time.html#var-run"><span>run</span></a></li><li><a href="riemann.time.html#var-run-tasks%21"><span>run-tasks!</span></a></li><li><a href="riemann.time.html#var-schedule%21"><span>schedule!</span></a></li><li><a href="riemann.time.html#var-schedule-sneaky%21"><span>schedule-sneaky!</span></a></li><li><a href="riemann.time.html#var-start%21"><span>start!</span></a></li><li><a href="riemann.time.html#var-stop%21"><span>stop!</span></a></li><li><a href="riemann.time.html#var-succ"><span>succ</span></a></li><li><a href="riemann.time.html#var-task-id"><span>task-id</span></a></li><li><a href="riemann.time.html#var-tasks"><span>tasks</span></a></li><li><a href="riemann.time.html#var-unix-time-real"><span>unix-time-real</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>riemann.time documentation</h2><pre class="doc">Clocks and scheduled tasks. Provides functions for getting the current time
and running functions (Tasks) at specific times and periods. Includes a
threadpool for task execution, controlled by (start!) and (stop!).</pre><div class="public" id="var--%3EEvery"><h3>-&gt;Every</h3><div class="usage"><code>(-&gt;Every id f t interval deferred-t cancelled)</code></div><pre class="doc">Positional factory function for class riemann.time.Every.
</pre></div><div class="public" id="var--%3EOnce"><h3>-&gt;Once</h3><div class="usage"><code>(-&gt;Once id f t cancelled)</code></div><pre class="doc">Positional factory function for class riemann.time.Once.
</pre></div><div class="public" id="var-after%21"><h3>after!</h3><div class="usage"><code>(after! delay f)</code></div><pre class="doc">Calls f after delay seconds
</pre></div><div class="public" id="var-cancel"><h3>cancel</h3><div class="usage"><code>(cancel task)</code></div><pre class="doc">Cancel this task.
</pre></div><div class="public" id="var-defer"><h3>defer</h3><div class="usage"><code>(defer this new-time)</code></div><pre class="doc">Schedule a task for a new time.
</pre></div><div class="public" id="var-every%21"><h3>every!</h3><div class="usage"><code>(every! interval f)</code><code>(every! interval delay f)</code></div><pre class="doc">Calls f every interval seconds, after delay.
</pre></div><div class="public" id="var-linear-time-real"><h3>linear-time-real</h3><div class="usage"><code>(linear-time-real)</code></div><pre class="doc">A current time on a linear scale with no fixed epoch; counts in seconds.
Unlike unix-time, which can pause, skip, or flow backwards, advances
consistently at (close) to wall clock time.</pre></div><div class="public" id="var-map-%3EEvery"><h3>map-&gt;Every</h3><div class="usage"><code>(map-&gt;Every m__6522__auto__)</code></div><pre class="doc">Factory function for class riemann.time.Every, taking a map of keywords to field values.
</pre></div><div class="public" id="var-map-%3EOnce"><h3>map-&gt;Once</h3><div class="usage"><code>(map-&gt;Once m__6522__auto__)</code></div><pre class="doc">Factory function for class riemann.time.Once, taking a map of keywords to field values.
</pre></div><div class="public" id="var-next-tick"><h3>next-tick</h3><div class="usage"><code>(next-tick anchor dt)</code><code>(next-tick anchor dt now)</code></div><pre class="doc">Given a period dt, beginning at some point in time anchor, finds the next
tick after time now, such that the next tick is separate from anchor by an
exact multiple of dt. If now is omitted, defaults to (unix-time).</pre></div><div class="public" id="var-once%21"><h3>once!</h3><div class="usage"><code>(once! t f)</code></div><pre class="doc">Calls f at t seconds.
</pre></div><div class="public" id="var-poll-task%21"><h3>poll-task!</h3><div class="usage"><code>(poll-task!)</code></div><pre class="doc">Removes the next task from the queue.
</pre></div><div class="public" id="var-reset-tasks%21"><h3>reset-tasks!</h3><div class="usage"><code>(reset-tasks!)</code></div><pre class="doc">Resets the task queue to empty, without triggering side effects.
</pre></div><div class="public" id="var-run"><h3>run</h3><div class="usage"><code>(run task)</code></div><pre class="doc">Executes this task.
</pre></div><div class="public" id="var-run-tasks%21"><h3>run-tasks!</h3><div class="usage"><code>(run-tasks! i)</code></div><pre class="doc">While running, takes tasks from the queue and executes them when ready. Will
park the current thread when no tasks are available.</pre></div><div class="public" id="var-schedule%21"><h3>schedule!</h3><div class="usage"><code>(schedule! task)</code></div><pre class="doc">Schedule a task. May awaken a thread from the threadpool to investigate.
</pre></div><div class="public" id="var-schedule-sneaky%21"><h3>schedule-sneaky!</h3><div class="usage"><code>(schedule-sneaky! task)</code></div><pre class="doc">Schedules a task. Does *not* awaken any threads.
</pre></div><div class="public" id="var-start%21"><h3>start!</h3><div class="usage"><code>(start!)</code></div><pre class="doc">Starts the threadpool to execute tasks on the queue automatically.
</pre></div><div class="public" id="var-stop%21"><h3>stop!</h3><div class="usage"><code>(stop!)</code></div><pre class="doc">Stops the task threadpool. Waits for threads to exit.
</pre></div><div class="public" id="var-succ"><h3>succ</h3><div class="usage"><code>(succ task)</code></div><pre class="doc">The successive task to this one.
</pre></div><div class="public" id="var-task-id"><h3>task-id</h3><div class="usage"><code>(task-id)</code></div><pre class="doc">Return a new task ID.
</pre></div><div class="public" id="var-tasks"><h3>tasks</h3><div class="usage"></div><pre class="doc">Scheduled operations.
</pre></div><div class="public" id="var-unix-time-real"><h3>unix-time-real</h3><div class="usage"><code>(unix-time-real)</code></div><pre class="doc">The current unix epoch time in seconds, taken from
System/currentTimeMillis.</pre></div></div></body></html>