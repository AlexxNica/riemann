<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>riemann.folds documentation</title></head><body><div id="header"><h1><a href="index.html">Riemann 0.2.12 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="riemann.bin.html"><span>riemann.bin</span></a></li><li><a href="riemann.blueflood.html"><span>riemann.blueflood</span></a></li><li><a href="riemann.boundary.html"><span>riemann.boundary</span></a></li><li><a href="riemann.campfire.html"><span>riemann.campfire</span></a></li><li><a href="riemann.cloudwatch.html"><span>riemann.cloudwatch</span></a></li><li><a href="riemann.common.html"><span>riemann.common</span></a></li><li><a href="riemann.config.html"><span>riemann.config</span></a></li><li><a href="riemann.core.html"><span>riemann.core</span></a></li><li><a href="riemann.datadog.html"><span>riemann.datadog</span></a></li><li><a href="riemann.deps.html"><span>riemann.deps</span></a></li><li><a href="riemann.druid.html"><span>riemann.druid</span></a></li><li><a href="riemann.elasticsearch.html"><span>riemann.elasticsearch</span></a></li><li><a href="riemann.email.html"><span>riemann.email</span></a></li><li><a href="riemann.expiration.html"><span>riemann.expiration</span></a></li><li class="current"><a href="riemann.folds.html"><span>riemann.folds</span></a></li><li><a href="riemann.graphite.html"><span>riemann.graphite</span></a></li><li><a href="riemann.hipchat.html"><span>riemann.hipchat</span></a></li><li><a href="riemann.index.html"><span>riemann.index</span></a></li><li><a href="riemann.influxdb.html"><span>riemann.influxdb</span></a></li><li><a href="riemann.instrumentation.html"><span>riemann.instrumentation</span></a></li><li><a href="riemann.kairosdb.html"><span>riemann.kairosdb</span></a></li><li><a href="riemann.keenio.html"><span>riemann.keenio</span></a></li><li><a href="riemann.librato.html"><span>riemann.librato</span></a></li><li><a href="riemann.logentries.html"><span>riemann.logentries</span></a></li><li><a href="riemann.logging.html"><span>riemann.logging</span></a></li><li><a href="riemann.logstash.html"><span>riemann.logstash</span></a></li><li><a href="riemann.mailgun.html"><span>riemann.mailgun</span></a></li><li><a href="riemann.nagios.html"><span>riemann.nagios</span></a></li><li><a href="riemann.opentsdb.html"><span>riemann.opentsdb</span></a></li><li><a href="riemann.opsgenie.html"><span>riemann.opsgenie</span></a></li><li><a href="riemann.pagerduty.html"><span>riemann.pagerduty</span></a></li><li><a href="riemann.plugin.html"><span>riemann.plugin</span></a></li><li><a href="riemann.pool.html"><span>riemann.pool</span></a></li><li><a href="riemann.prometheus.html"><span>riemann.prometheus</span></a></li><li><a href="riemann.pubsub.html"><span>riemann.pubsub</span></a></li><li><a href="riemann.pushover.html"><span>riemann.pushover</span></a></li><li><a href="riemann.query.html"><span>riemann.query</span></a></li><li><a href="riemann.repl.html"><span>riemann.repl</span></a></li><li><a href="riemann.service.html"><span>riemann.service</span></a></li><li><a href="riemann.shinken.html"><span>riemann.shinken</span></a></li><li><a href="riemann.slack.html"><span>riemann.slack</span></a></li><li><a href="riemann.sns.html"><span>riemann.sns</span></a></li><li><a href="riemann.stackdriver.html"><span>riemann.stackdriver</span></a></li><li><a href="riemann.streams.html"><span>riemann.streams</span></a></li><li><a href="riemann.test.html"><span>riemann.test</span></a></li><li><a href="riemann.time.html"><span>riemann.time</span></a></li><li><a href="riemann.time.controlled.html"><span>riemann.time.controlled</span></a></li><li><a href="riemann.transport.html"><span>riemann.transport</span></a></li><li><a href="riemann.transport.debug.html"><span>riemann.transport.debug</span></a></li><li><a href="riemann.transport.graphite.html"><span>riemann.transport.graphite</span></a></li><li><a href="riemann.transport.opentsdb.html"><span>riemann.transport.opentsdb</span></a></li><li><a href="riemann.transport.sse.html"><span>riemann.transport.sse</span></a></li><li><a href="riemann.transport.tcp.html"><span>riemann.transport.tcp</span></a></li><li><a href="riemann.transport.udp.html"><span>riemann.transport.udp</span></a></li><li><a href="riemann.transport.websockets.html"><span>riemann.transport.websockets</span></a></li><li><a href="riemann.twilio.html"><span>riemann.twilio</span></a></li><li><a href="riemann.victorops.html"><span>riemann.victorops</span></a></li><li><a href="riemann.xymon.html"><span>riemann.xymon</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="riemann.folds.html#var-count"><span>count</span></a></li><li><a href="riemann.folds.html#var-difference"><span>difference</span></a></li><li><a href="riemann.folds.html#var-difference*"><span>difference*</span></a></li><li><a href="riemann.folds.html#var-extremum"><span>extremum</span></a></li><li><a href="riemann.folds.html#var-fold"><span>fold</span></a></li><li><a href="riemann.folds.html#var-fold*"><span>fold*</span></a></li><li><a href="riemann.folds.html#var-fold-all"><span>fold-all</span></a></li><li><a href="riemann.folds.html#var-maximum"><span>maximum</span></a></li><li><a href="riemann.folds.html#var-mean"><span>mean</span></a></li><li><a href="riemann.folds.html#var-median"><span>median</span></a></li><li><a href="riemann.folds.html#var-minimum"><span>minimum</span></a></li><li><a href="riemann.folds.html#var-mode"><span>mode</span></a></li><li><a href="riemann.folds.html#var-modes"><span>modes</span></a></li><li><a href="riemann.folds.html#var-non-nil-metrics"><span>non-nil-metrics</span></a></li><li><a href="riemann.folds.html#var-product"><span>product</span></a></li><li><a href="riemann.folds.html#var-product*"><span>product*</span></a></li><li><a href="riemann.folds.html#var-quotient"><span>quotient</span></a></li><li><a href="riemann.folds.html#var-quotient*"><span>quotient*</span></a></li><li><a href="riemann.folds.html#var-quotient-sloppy"><span>quotient-sloppy</span></a></li><li><a href="riemann.folds.html#var-sorted-sample"><span>sorted-sample</span></a></li><li><a href="riemann.folds.html#var-sorted-sample-extract"><span>sorted-sample-extract</span></a></li><li><a href="riemann.folds.html#var-std-dev"><span>std-dev</span></a></li><li><a href="riemann.folds.html#var-sum"><span>sum</span></a></li><li><a href="riemann.folds.html#var-sum*"><span>sum*</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>riemann.folds documentation</h2><pre class="doc">Functions for combining states.

Folds usually come in two variants: a friendly version like sum, and a strict
version like sum*. Strict variants will throw when one of their events is
nil, missing a metric, or otherwise invalid. In typical use, however, you
won't *have* all the necessary information to pass on an event. Friendly
variants will do their best to ignore these error conditions where sensible,
returning partially complete events or nil instead of throwing.

Called with an empty list, folds which would return a single event return
nil.</pre><div class="public" id="var-count"><h3>count</h3><div class="usage"><code>(count events)</code></div><pre class="doc">Returns the number of events.
</pre></div><div class="public" id="var-difference"><h3>difference</h3><div class="usage"><code>(difference events)</code></div><pre class="doc">Subtracts events. Returns the first event, with its metric reduced by the
metrics of all subsequent events with metrics. Returns nil if the first event
is nil, or its metric is nil.</pre></div><div class="public" id="var-difference*"><h3>difference*</h3><div class="usage"><code>(difference* events)</code></div><pre class="doc">Subtracts events. Returns the first event, with its metric reduced by the
metrics of all subsequent events.</pre></div><div class="public" id="var-extremum"><h3>extremum</h3><div class="usage"><code>(extremum comparison events)</code></div><pre class="doc">Returns an extreme event, by a comparison function over the metric.
</pre></div><div class="public" id="var-fold"><h3>fold</h3><div class="usage"><code>(fold f events)</code></div><pre class="doc">Fold with a reduction function over metrics. Ignores nil events and events
with nil metrics.

If there are *no* non-nil events, returns nil.</pre></div><div class="public" id="var-fold*"><h3>fold*</h3><div class="usage"><code>(fold* f events)</code></div><pre class="doc">Fold with a reduction function over metrics. Throws if any event or metric
is nil.</pre></div><div class="public" id="var-fold-all"><h3>fold-all</h3><div class="usage"><code>(fold-all f events)</code></div><pre class="doc">Fold with a reduction function over metrics.

If the first event has a nil :metric, or if any remaining event is nil, or
has a nil metric, returns the first event, but with :metric nil and a
:description of the error.

If the first event is nil, returns nil.</pre></div><div class="public" id="var-maximum"><h3>maximum</h3><div class="usage"><code>(maximum events)</code></div><pre class="doc">Returns the maximum event, by metric.
</pre></div><div class="public" id="var-mean"><h3>mean</h3><div class="usage"><code>(mean events)</code></div><pre class="doc">Averages events together. Mean metric, merged into first of events. Ignores
nil events and nil metrics.</pre></div><div class="public" id="var-median"><h3>median</h3><div class="usage"><code>(median events)</code></div><pre class="doc">Returns the median event from events, by metric.
</pre></div><div class="public" id="var-minimum"><h3>minimum</h3><div class="usage"><code>(minimum events)</code></div><pre class="doc">Returns the minimum event, by metric.
</pre></div><div class="public" id="var-mode"><h3>mode</h3><div class="usage"><code>(mode events)</code></div><pre class="doc">Yield any mode returned by modes.
</pre></div><div class="public" id="var-modes"><h3>modes</h3><div class="usage"><code>(modes events)</code></div><pre class="doc">Keep track of repeating metrics. Yields a sequence of events with the highest
occuring metrics.</pre></div><div class="public" id="var-non-nil-metrics"><h3>non-nil-metrics</h3><div class="usage"><code>(non-nil-metrics events)</code></div><pre class="doc">Given a sequence of events, returns a compact sequence of their
metrics--that is, omits any events which are nil, or have nil metrics.</pre></div><div class="public" id="var-product"><h3>product</h3><div class="usage"><code>(product events)</code></div><pre class="doc">Multiplies events. Returns the first event with a metric, with its metric
being the product of all events with metrics.</pre></div><div class="public" id="var-product*"><h3>product*</h3><div class="usage"><code>(product* events)</code></div><pre class="doc">Multiplies events. Returns the first event, with its metric multiplied by
the metrics of all other events.</pre></div><div class="public" id="var-quotient"><h3>quotient</h3><div class="usage"><code>(quotient events)</code></div><pre class="doc">Divides events. Returns the first event, with its metric divided by the
product of the metrics of all subsequent events.</pre></div><div class="public" id="var-quotient*"><h3>quotient*</h3><div class="usage"><code>(quotient* events)</code></div><pre class="doc">Divides events. Returns the first event, with its metric divided by the
product of the metrics of all subsequent events. Like quotient, but throws
when any metric is nil or a divisor is zero.</pre></div><div class="public" id="var-quotient-sloppy"><h3>quotient-sloppy</h3><div class="usage"><code>(quotient-sloppy events)</code></div><pre class="doc">Like quotient, but considers 0/0 = 0. Useful for relative rates, when you
want the ratio of two constant values to be zero.</pre></div><div class="public" id="var-sorted-sample"><h3>sorted-sample</h3><div class="usage"><code>(sorted-sample s points)</code></div><pre class="doc">Sample a sequence of events at points. Returns events with service remapped
to (str service &quot; &quot; point). For instance, (sorted-sample events [0 1])
returns a 2-element seq of the smallest event and the biggest event, by
metric. The first has a service which ends in &quot; 0&quot; and the second one ends
in &quot; 1&quot;. If the points is a map, eg (sorted-sample events {0 &quot;.min&quot; 1
&quot;.max&quot;}, the the values will be appened to the service name directly.
Useful for extracting histograms and percentiles.

When s is empty, returns an empty list.</pre></div><div class="public" id="var-sorted-sample-extract"><h3>sorted-sample-extract</h3><div class="usage"><code>(sorted-sample-extract s points)</code></div><pre class="doc">Returns the events in seqable s, sorted and taken at each point p of points,
where p ranges from 0 (smallest metric) to 1 (largest metric). 0.5 is the
median event, 0.95 is the 95th' percentile event, and so forth. Ignores
events without a metric.</pre></div><div class="public" id="var-std-dev"><h3>std-dev</h3><div class="usage"><code>(std-dev events)</code></div><pre class="doc">calculates standard deviation across a seq of events
</pre></div><div class="public" id="var-sum"><h3>sum</h3><div class="usage"><code>(sum events)</code></div><pre class="doc">Adds events together. Sums metrics, merges into first event with a metric,
ignores nil events and nil metrics.</pre></div><div class="public" id="var-sum*"><h3>sum*</h3><div class="usage"><code>(sum* events)</code></div><pre class="doc">Adds events together. Sums metrics, merges into first of events.
</pre></div></div></body></html>