<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>riemann.index documentation</title></head><body><div id="header"><h1><a href="index.html">Riemann 0.2.12 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="riemann.bin.html"><span>riemann.bin</span></a></li><li><a href="riemann.blueflood.html"><span>riemann.blueflood</span></a></li><li><a href="riemann.boundary.html"><span>riemann.boundary</span></a></li><li><a href="riemann.campfire.html"><span>riemann.campfire</span></a></li><li><a href="riemann.cloudwatch.html"><span>riemann.cloudwatch</span></a></li><li><a href="riemann.common.html"><span>riemann.common</span></a></li><li><a href="riemann.config.html"><span>riemann.config</span></a></li><li><a href="riemann.core.html"><span>riemann.core</span></a></li><li><a href="riemann.datadog.html"><span>riemann.datadog</span></a></li><li><a href="riemann.deps.html"><span>riemann.deps</span></a></li><li><a href="riemann.druid.html"><span>riemann.druid</span></a></li><li><a href="riemann.elasticsearch.html"><span>riemann.elasticsearch</span></a></li><li><a href="riemann.email.html"><span>riemann.email</span></a></li><li><a href="riemann.expiration.html"><span>riemann.expiration</span></a></li><li><a href="riemann.folds.html"><span>riemann.folds</span></a></li><li><a href="riemann.graphite.html"><span>riemann.graphite</span></a></li><li><a href="riemann.hipchat.html"><span>riemann.hipchat</span></a></li><li class="current"><a href="riemann.index.html"><span>riemann.index</span></a></li><li><a href="riemann.influxdb.html"><span>riemann.influxdb</span></a></li><li><a href="riemann.instrumentation.html"><span>riemann.instrumentation</span></a></li><li><a href="riemann.kairosdb.html"><span>riemann.kairosdb</span></a></li><li><a href="riemann.keenio.html"><span>riemann.keenio</span></a></li><li><a href="riemann.librato.html"><span>riemann.librato</span></a></li><li><a href="riemann.logentries.html"><span>riemann.logentries</span></a></li><li><a href="riemann.logging.html"><span>riemann.logging</span></a></li><li><a href="riemann.logstash.html"><span>riemann.logstash</span></a></li><li><a href="riemann.mailgun.html"><span>riemann.mailgun</span></a></li><li><a href="riemann.nagios.html"><span>riemann.nagios</span></a></li><li><a href="riemann.opentsdb.html"><span>riemann.opentsdb</span></a></li><li><a href="riemann.opsgenie.html"><span>riemann.opsgenie</span></a></li><li><a href="riemann.pagerduty.html"><span>riemann.pagerduty</span></a></li><li><a href="riemann.plugin.html"><span>riemann.plugin</span></a></li><li><a href="riemann.pool.html"><span>riemann.pool</span></a></li><li><a href="riemann.prometheus.html"><span>riemann.prometheus</span></a></li><li><a href="riemann.pubsub.html"><span>riemann.pubsub</span></a></li><li><a href="riemann.pushover.html"><span>riemann.pushover</span></a></li><li><a href="riemann.query.html"><span>riemann.query</span></a></li><li><a href="riemann.repl.html"><span>riemann.repl</span></a></li><li><a href="riemann.service.html"><span>riemann.service</span></a></li><li><a href="riemann.shinken.html"><span>riemann.shinken</span></a></li><li><a href="riemann.slack.html"><span>riemann.slack</span></a></li><li><a href="riemann.sns.html"><span>riemann.sns</span></a></li><li><a href="riemann.stackdriver.html"><span>riemann.stackdriver</span></a></li><li><a href="riemann.streams.html"><span>riemann.streams</span></a></li><li><a href="riemann.test.html"><span>riemann.test</span></a></li><li><a href="riemann.time.html"><span>riemann.time</span></a></li><li><a href="riemann.time.controlled.html"><span>riemann.time.controlled</span></a></li><li><a href="riemann.transport.html"><span>riemann.transport</span></a></li><li><a href="riemann.transport.debug.html"><span>riemann.transport.debug</span></a></li><li><a href="riemann.transport.graphite.html"><span>riemann.transport.graphite</span></a></li><li><a href="riemann.transport.opentsdb.html"><span>riemann.transport.opentsdb</span></a></li><li><a href="riemann.transport.sse.html"><span>riemann.transport.sse</span></a></li><li><a href="riemann.transport.tcp.html"><span>riemann.transport.tcp</span></a></li><li><a href="riemann.transport.udp.html"><span>riemann.transport.udp</span></a></li><li><a href="riemann.transport.websockets.html"><span>riemann.transport.websockets</span></a></li><li><a href="riemann.twilio.html"><span>riemann.twilio</span></a></li><li><a href="riemann.victorops.html"><span>riemann.victorops</span></a></li><li><a href="riemann.xymon.html"><span>riemann.xymon</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="riemann.index.html#var-clear"><span>clear</span></a></li><li><a href="riemann.index.html#var-delete"><span>delete</span></a></li><li><a href="riemann.index.html#var-delete-exactly"><span>delete-exactly</span></a></li><li><a href="riemann.index.html#var-expire"><span>expire</span></a></li><li><a href="riemann.index.html#var-index"><span>index</span></a></li><li><a href="riemann.index.html#var-insert"><span>insert</span></a></li><li><a href="riemann.index.html#var-lookup"><span>lookup</span></a></li><li><a href="riemann.index.html#var-nbhm-index"><span>nbhm-index</span></a></li><li><a href="riemann.index.html#var-query-for-host-and-service"><span>query-for-host-and-service</span></a></li><li><a href="riemann.index.html#var-search"><span>search</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>riemann.index documentation</h2><pre class="doc">Maintains a stateful index of events by [host, service] key. Can be queried
to return the most recent indexed events matching some expression. Can expire
events which have exceeded their TTL. Presently the only implementation of
the index protocol is backed by a nonblockinghashmap, but I plan to add an
HSQLDB backend as well.

Indexes must extend three protocols:

Index: indexing and querying events
Seqable: returning a list of events
Service: lifecycle management</pre><div class="public" id="var-clear"><h3>clear</h3><div class="usage"><code>(clear this)</code></div><pre class="doc">Resets the index
</pre></div><div class="public" id="var-delete"><h3>delete</h3><div class="usage"><code>(delete this event)</code></div><pre class="doc">Deletes any event with this host &amp; service from index. Returns the deleted
event, or nil.</pre></div><div class="public" id="var-delete-exactly"><h3>delete-exactly</h3><div class="usage"><code>(delete-exactly this event)</code></div><pre class="doc">Deletes event from index. Returns the deleted event, or nil.
</pre></div><div class="public" id="var-expire"><h3>expire</h3><div class="usage"><code>(expire this)</code></div><pre class="doc">Return a seq of expired states from this index, removing each.
</pre></div><div class="public" id="var-index"><h3>index</h3><div class="usage"><code>(index)</code></div><pre class="doc">Create a new index (currently: an nhbm index)
</pre></div><div class="public" id="var-insert"><h3>insert</h3><div class="usage"><code>(insert this event)</code></div><pre class="doc">Updates index with event
</pre></div><div class="public" id="var-lookup"><h3>lookup</h3><div class="usage"><code>(lookup this host service)</code></div><pre class="doc">Lookup an indexed event from the index
</pre></div><div class="public" id="var-nbhm-index"><h3>nbhm-index</h3><div class="usage"><code>(nbhm-index)</code></div><pre class="doc">Create a new nonblockinghashmap backed index
</pre></div><div class="public" id="var-query-for-host-and-service"><h3>query-for-host-and-service</h3><div class="usage"><code>(query-for-host-and-service query-ast)</code></div><pre class="doc">Check if the AST is only searching for the host and service
</pre></div><div class="public" id="var-search"><h3>search</h3><div class="usage"><code>(search this query-ast)</code></div><pre class="doc">Returns a seq of events from the index matching this query AST
</pre></div></div></body></html>