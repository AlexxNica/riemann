<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>riemann.influxdb documentation</title></head><body><div id="header"><h1><a href="index.html">Riemann 0.2.13-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="riemann.bin.html"><span>riemann.bin</span></a></li><li><a href="riemann.blueflood.html"><span>riemann.blueflood</span></a></li><li><a href="riemann.boundary.html"><span>riemann.boundary</span></a></li><li><a href="riemann.campfire.html"><span>riemann.campfire</span></a></li><li><a href="riemann.cloudwatch.html"><span>riemann.cloudwatch</span></a></li><li><a href="riemann.common.html"><span>riemann.common</span></a></li><li><a href="riemann.config.html"><span>riemann.config</span></a></li><li><a href="riemann.core.html"><span>riemann.core</span></a></li><li><a href="riemann.datadog.html"><span>riemann.datadog</span></a></li><li><a href="riemann.deps.html"><span>riemann.deps</span></a></li><li><a href="riemann.druid.html"><span>riemann.druid</span></a></li><li><a href="riemann.elasticsearch.html"><span>riemann.elasticsearch</span></a></li><li><a href="riemann.email.html"><span>riemann.email</span></a></li><li><a href="riemann.expiration.html"><span>riemann.expiration</span></a></li><li><a href="riemann.folds.html"><span>riemann.folds</span></a></li><li><a href="riemann.graphite.html"><span>riemann.graphite</span></a></li><li><a href="riemann.hipchat.html"><span>riemann.hipchat</span></a></li><li><a href="riemann.index.html"><span>riemann.index</span></a></li><li class="current"><a href="riemann.influxdb.html"><span>riemann.influxdb</span></a></li><li><a href="riemann.instrumentation.html"><span>riemann.instrumentation</span></a></li><li><a href="riemann.kairosdb.html"><span>riemann.kairosdb</span></a></li><li><a href="riemann.keenio.html"><span>riemann.keenio</span></a></li><li><a href="riemann.librato.html"><span>riemann.librato</span></a></li><li><a href="riemann.logentries.html"><span>riemann.logentries</span></a></li><li><a href="riemann.logging.html"><span>riemann.logging</span></a></li><li><a href="riemann.logstash.html"><span>riemann.logstash</span></a></li><li><a href="riemann.mailgun.html"><span>riemann.mailgun</span></a></li><li><a href="riemann.nagios.html"><span>riemann.nagios</span></a></li><li><a href="riemann.opentsdb.html"><span>riemann.opentsdb</span></a></li><li><a href="riemann.opsgenie.html"><span>riemann.opsgenie</span></a></li><li><a href="riemann.pagerduty.html"><span>riemann.pagerduty</span></a></li><li><a href="riemann.plugin.html"><span>riemann.plugin</span></a></li><li><a href="riemann.pool.html"><span>riemann.pool</span></a></li><li><a href="riemann.prometheus.html"><span>riemann.prometheus</span></a></li><li><a href="riemann.pubsub.html"><span>riemann.pubsub</span></a></li><li><a href="riemann.pushover.html"><span>riemann.pushover</span></a></li><li><a href="riemann.query.html"><span>riemann.query</span></a></li><li><a href="riemann.repl.html"><span>riemann.repl</span></a></li><li><a href="riemann.service.html"><span>riemann.service</span></a></li><li><a href="riemann.shinken.html"><span>riemann.shinken</span></a></li><li><a href="riemann.slack.html"><span>riemann.slack</span></a></li><li><a href="riemann.sns.html"><span>riemann.sns</span></a></li><li><a href="riemann.stackdriver.html"><span>riemann.stackdriver</span></a></li><li><a href="riemann.streams.html"><span>riemann.streams</span></a></li><li><a href="riemann.test.html"><span>riemann.test</span></a></li><li><a href="riemann.time.html"><span>riemann.time</span></a></li><li><a href="riemann.time.controlled.html"><span>riemann.time.controlled</span></a></li><li><a href="riemann.transport.html"><span>riemann.transport</span></a></li><li><a href="riemann.transport.debug.html"><span>riemann.transport.debug</span></a></li><li><a href="riemann.transport.graphite.html"><span>riemann.transport.graphite</span></a></li><li><a href="riemann.transport.opentsdb.html"><span>riemann.transport.opentsdb</span></a></li><li><a href="riemann.transport.sse.html"><span>riemann.transport.sse</span></a></li><li><a href="riemann.transport.tcp.html"><span>riemann.transport.tcp</span></a></li><li><a href="riemann.transport.udp.html"><span>riemann.transport.udp</span></a></li><li><a href="riemann.transport.websockets.html"><span>riemann.transport.websockets</span></a></li><li><a href="riemann.twilio.html"><span>riemann.twilio</span></a></li><li><a href="riemann.victorops.html"><span>riemann.victorops</span></a></li><li><a href="riemann.xymon.html"><span>riemann.xymon</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="riemann.influxdb.html#var-event-%3Epoint-8"><span>event-&gt;point-8</span></a></li><li><a href="riemann.influxdb.html#var-event-%3Epoint-9"><span>event-&gt;point-9</span></a></li><li><a href="riemann.influxdb.html#var-event-fields"><span>event-fields</span></a></li><li><a href="riemann.influxdb.html#var-event-tags"><span>event-tags</span></a></li><li><a href="riemann.influxdb.html#var-events-%3Epoints-8"><span>events-&gt;points-8</span></a></li><li><a href="riemann.influxdb.html#var-events-%3Epoints-9"><span>events-&gt;points-9</span></a></li><li><a href="riemann.influxdb.html#var-influxdb"><span>influxdb</span></a></li><li><a href="riemann.influxdb.html#var-influxdb-8"><span>influxdb-8</span></a></li><li><a href="riemann.influxdb.html#var-influxdb-9"><span>influxdb-9</span></a></li><li><a href="riemann.influxdb.html#var-special-fields"><span>special-fields</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>riemann.influxdb documentation</h2><pre class="doc">Forwards events to InfluxDB. Supports both 0.8 and 0.9 APIs.
</pre><div class="public" id="var-event-%3Epoint-8"><h3>event-&gt;point-8</h3><div class="usage"><code>(event-&gt;point-8 event)</code></div><pre class="doc">Transform a Riemann event to an InfluxDB point, or nil if the event is
missing a metric or service.</pre></div><div class="public" id="var-event-%3Epoint-9"><h3>event-&gt;point-9</h3><div class="usage"><code>(event-&gt;point-9 tag-fields event)</code></div><pre class="doc">Converts a Riemann event into an InfluxDB point if it has a time, service,
and metric.</pre></div><div class="public" id="var-event-fields"><h3>event-fields</h3><div class="usage"><code>(event-fields tag-fields event)</code></div><pre class="doc">Generates a map of InfluxDB fields from a Riemann event. The event's
`metric` is converted to the `value` field, and any additional event fields
which are not standard Riemann properties or in `tag-fields` will also be
present.</pre></div><div class="public" id="var-event-tags"><h3>event-tags</h3><div class="usage"><code>(event-tags tag-fields event)</code></div><pre class="doc">Generates a map of InfluxDB tags from a Riemann event. Any fields in the
event which are named in `tag-fields` will be converted to a string key/value
entry in the tag map.</pre></div><div class="public" id="var-events-%3Epoints-8"><h3>events-&gt;points-8</h3><div class="usage"><code>(events-&gt;points-8 series-fn events)</code></div><pre class="doc">Takes a series fn that finds the series for a given event, and a sequence of
events, and emits a map of series names to vectors of points for that series.</pre></div><div class="public" id="var-events-%3Epoints-9"><h3>events-&gt;points-9</h3><div class="usage"><code>(events-&gt;points-9 tag-fields events)</code></div><pre class="doc">Converts a collection of Riemann events into InfluxDB points. Events which
map to nil are removed from the final collection.  Also filter out NaNs that
influxdb can't deal with currently.</pre></div><div class="public" id="var-influxdb"><h3>influxdb</h3><div class="usage"><code>(influxdb opts)</code></div><pre class="doc">Returns a function which accepts an event, or sequence of events, and writes
them to InfluxDB as a batch of measurement points. For performance, you should
wrap this stream with `batch` or an asynchronous queue.

(influxdb {:host &quot;influxdb.example.com&quot;
           :db &quot;my_db&quot;
           :user &quot;riemann&quot;
           :password &quot;secret&quot;})

General Options:

`:version`        Version of InfluxDB client to use. Should be one of `:0.8`
                  or `:0.9`. (default: `:0.8`)

`:db`             Name of the database to write to. (default: `&quot;riemann&quot;`)

`:scheme`         URL scheme for endpoint. (default: `&quot;http&quot;`)

`:host`           Hostname to write points to. (default: `&quot;localhost&quot;`)

`:port`           API port number. (default: `8086`)

`:username`       Database user to authenticate as. (optional)

`:password`       Password to authenticate with. (optional)

`:insecure`       If scheme is https and certficate is self-signed. (optional)

See `influxdb-8` and `influxdb-9` for version-specific options.</pre></div><div class="public" id="var-influxdb-8"><h3>influxdb-8</h3><div class="usage"><code>(influxdb-8 opts)</code></div><pre class="doc">Returns a function which accepts an event, or sequence of events, and sends
it to InfluxDB. Compatible with the 0.8.x series.

; For giving series name as the concatenation of :host and :service fields
; with dot separator.

(influxdb-8 {:host   &quot;play.influxdb.org&quot;
             :port   8086
             :series #(str (:host %) &quot;.&quot; (:service %))})

0.8 Options:

:name           Name of the metric which is same as the series name.

:series         Function which takes an event and returns the InfluxDB series
                name to use. Defaults to :service. If this function returns
                nil, series names default to &quot;riemann-events&quot;.</pre></div><div class="public" id="var-influxdb-9"><h3>influxdb-9</h3><div class="usage"><code>(influxdb-9 opts)</code></div><pre class="doc">Returns a function which accepts an event, or sequence of events, and writes
them to InfluxDB. Compatible with the 0.9.x series.
(influxdb-9 {:host &quot;influxdb.example.com&quot;
             :db &quot;my_db&quot;
             :retention &quot;raw&quot;
             :tag-fields #{:host :sys :env}})
0.9 Options:
`:retention`      Name of retention policy to use. (optional)
`:tag-fields`     A set of event fields to map into InfluxDB series tags.
                  (default: `#{:host}`)
`:tags`           A common map of tags to apply to all points. (optional)
`:timeout`        HTTP timeout in milliseconds. (default: `5000`)</pre></div><div class="public" id="var-special-fields"><h3>special-fields</h3><div class="usage"></div><pre class="doc">A set of event fields in Riemann with special handling logic.
</pre></div></div></body></html>