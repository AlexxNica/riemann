<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>riemann.influxdb documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Riemann</span> <span class="project-version">0.2.12</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>riemann</span></div></div></li><li class="depth-2 branch"><a href="riemann.bin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bin</span></div></a></li><li class="depth-2 branch"><a href="riemann.blueflood.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>blueflood</span></div></a></li><li class="depth-2 branch"><a href="riemann.boundary.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>boundary</span></div></a></li><li class="depth-2 branch"><a href="riemann.campfire.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>campfire</span></div></a></li><li class="depth-2 branch"><a href="riemann.cloudwatch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cloudwatch</span></div></a></li><li class="depth-2 branch"><a href="riemann.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-2 branch"><a href="riemann.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="riemann.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="riemann.datadog.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datadog</span></div></a></li><li class="depth-2 branch"><a href="riemann.deps.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deps</span></div></a></li><li class="depth-2 branch"><a href="riemann.druid.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>druid</span></div></a></li><li class="depth-2 branch"><a href="riemann.elasticsearch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>elasticsearch</span></div></a></li><li class="depth-2 branch"><a href="riemann.email.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>email</span></div></a></li><li class="depth-2 branch"><a href="riemann.expiration.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>expiration</span></div></a></li><li class="depth-2 branch"><a href="riemann.folds.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>folds</span></div></a></li><li class="depth-2 branch"><a href="riemann.graphite.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graphite</span></div></a></li><li class="depth-2 branch"><a href="riemann.hipchat.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hipchat</span></div></a></li><li class="depth-2 branch"><a href="riemann.index.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>index</span></div></a></li><li class="depth-2 branch current"><a href="riemann.influxdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>influxdb</span></div></a></li><li class="depth-2 branch"><a href="riemann.instrumentation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>instrumentation</span></div></a></li><li class="depth-2 branch"><a href="riemann.kairosdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kairosdb</span></div></a></li><li class="depth-2 branch"><a href="riemann.keenio.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>keenio</span></div></a></li><li class="depth-2 branch"><a href="riemann.librato.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>librato</span></div></a></li><li class="depth-2 branch"><a href="riemann.logentries.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logentries</span></div></a></li><li class="depth-2 branch"><a href="riemann.logging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logging</span></div></a></li><li class="depth-2 branch"><a href="riemann.logstash.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logstash</span></div></a></li><li class="depth-2 branch"><a href="riemann.mailgun.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mailgun</span></div></a></li><li class="depth-2 branch"><a href="riemann.nagios.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nagios</span></div></a></li><li class="depth-2 branch"><a href="riemann.opentsdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>opentsdb</span></div></a></li><li class="depth-2 branch"><a href="riemann.opsgenie.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>opsgenie</span></div></a></li><li class="depth-2 branch"><a href="riemann.pagerduty.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pagerduty</span></div></a></li><li class="depth-2 branch"><a href="riemann.plugin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>plugin</span></div></a></li><li class="depth-2 branch"><a href="riemann.pool.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pool</span></div></a></li><li class="depth-2 branch"><a href="riemann.prometheus.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prometheus</span></div></a></li><li class="depth-2 branch"><a href="riemann.pubsub.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pubsub</span></div></a></li><li class="depth-2 branch"><a href="riemann.pushover.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pushover</span></div></a></li><li class="depth-2 branch"><a href="riemann.query.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>query</span></div></a></li><li class="depth-2 branch"><a href="riemann.repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>repl</span></div></a></li><li class="depth-2 branch"><a href="riemann.service.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>service</span></div></a></li><li class="depth-2 branch"><a href="riemann.shinken.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shinken</span></div></a></li><li class="depth-2 branch"><a href="riemann.slack.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>slack</span></div></a></li><li class="depth-2 branch"><a href="riemann.sns.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sns</span></div></a></li><li class="depth-2 branch"><a href="riemann.stackdriver.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stackdriver</span></div></a></li><li class="depth-2 branch"><a href="riemann.streams.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>streams</span></div></a></li><li class="depth-2 branch"><a href="riemann.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-2"><a href="riemann.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-3"><a href="riemann.time.controlled.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>controlled</span></div></a></li><li class="depth-2"><a href="riemann.transport.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>transport</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.graphite.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graphite</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.opentsdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>opentsdb</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.sse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sse</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.tcp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tcp</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.udp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>udp</span></div></a></li><li class="depth-3"><a href="riemann.transport.websockets.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>websockets</span></div></a></li><li class="depth-2 branch"><a href="riemann.twilio.html"><div class="inner"><span class="tree" style="top: -238px;"><span class="top" style="height: 247px;"></span><span class="bottom"></span></span><span>twilio</span></div></a></li><li class="depth-2 branch"><a href="riemann.victorops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>victorops</span></div></a></li><li class="depth-2"><a href="riemann.xymon.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>xymon</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="riemann.influxdb.html#var-event-.3Epoint-8"><div class="inner"><span>event-&gt;point-8</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-event-.3Epoint-9"><div class="inner"><span>event-&gt;point-9</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-event-fields"><div class="inner"><span>event-fields</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-event-tags"><div class="inner"><span>event-tags</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-events-.3Epoints-8"><div class="inner"><span>events-&gt;points-8</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-events-.3Epoints-9"><div class="inner"><span>events-&gt;points-9</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-influxdb"><div class="inner"><span>influxdb</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-influxdb-8"><div class="inner"><span>influxdb-8</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-influxdb-9"><div class="inner"><span>influxdb-9</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-kv-encode-9"><div class="inner"><span>kv-encode-9</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-lineprotocol-encode-9"><div class="inner"><span>lineprotocol-encode-9</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-replace-disallowed-9"><div class="inner"><span>replace-disallowed-9</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-special-fields"><div class="inner"><span>special-fields</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">riemann.influxdb</h1><div class="doc"><div class="markdown"><p>Forwards events to InfluxDB. Supports both 0.8 and 0.9 APIs.</p></div></div><div class="public anchor" id="var-event-.3Epoint-8"><h3>event-&gt;point-8</h3><div class="usage"><code>(event-&gt;point-8 event)</code></div><div class="doc"><div class="markdown"><p>Transform a Riemann event to an InfluxDB point, or nil if the event is missing a metric or service.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.2.12/src/riemann/influxdb.clj#L61">view source</a></div></div><div class="public anchor" id="var-event-.3Epoint-9"><h3>event-&gt;point-9</h3><div class="usage"><code>(event-&gt;point-9 tag-fields event)</code></div><div class="doc"><div class="markdown"><p>Converts a Riemann event into an InfluxDB point if it has a time, service, and metric.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.2.12/src/riemann/influxdb.clj#L122">view source</a></div></div><div class="public anchor" id="var-event-fields"><h3>event-fields</h3><div class="usage"><code>(event-fields tag-fields event)</code></div><div class="doc"><div class="markdown"><p>Generates a map of InfluxDB fields from a Riemann event. The event’s <code>metric</code> is converted to the <code>value</code> field, and any additional event fields which are not standard Riemann properties or in <code>tag-fields</code> will also be present.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.2.12/src/riemann/influxdb.clj#L45">view source</a></div></div><div class="public anchor" id="var-event-tags"><h3>event-tags</h3><div class="usage"><code>(event-tags tag-fields event)</code></div><div class="doc"><div class="markdown"><p>Generates a map of InfluxDB tags from a Riemann event. Any fields in the event which are named in <code>tag-fields</code> will be converted to a string key/value entry in the tag map.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.2.12/src/riemann/influxdb.clj#L35">view source</a></div></div><div class="public anchor" id="var-events-.3Epoints-8"><h3>events-&gt;points-8</h3><div class="usage"><code>(events-&gt;points-8 series-fn events)</code></div><div class="doc"><div class="markdown"><p>Takes a series fn that finds the series for a given event, and a sequence of events, and emits a map of series names to vectors of points for that series.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.2.12/src/riemann/influxdb.clj#L73">view source</a></div></div><div class="public anchor" id="var-events-.3Epoints-9"><h3>events-&gt;points-9</h3><div class="usage"><code>(events-&gt;points-9 tag-fields events)</code></div><div class="doc"><div class="markdown"><p>Converts a collection of Riemann events into InfluxDB points. Events which map to nil are removed from the final collection. Also filter out NaNs that influxdb can’t deal with currently.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.2.12/src/riemann/influxdb.clj#L132">view source</a></div></div><div class="public anchor" id="var-influxdb"><h3>influxdb</h3><div class="usage"><code>(influxdb opts)</code></div><div class="doc"><div class="markdown"><p>Returns a function which accepts an event, or sequence of events, and writes them to InfluxDB as a batch of measurement points. For performance, you should wrap this stream with <code>batch</code> or an asynchronous queue.</p>
<p>(influxdb {:host “influxdb.example.com”  :db “my_db”  :user “riemann”  :password “secret”})</p>
<p>General Options:</p>
<p><code>:version</code> Version of InfluxDB client to use. Should be one of <code>:0.8</code>  or <code>:0.9</code>. (default: <code>:0.8</code>)</p>
<p><code>:db</code> Name of the database to write to. (default: <code>"riemann"</code>)</p>
<p><code>:scheme</code> URL scheme for endpoint. (default: <code>"http"</code>)</p>
<p><code>:host</code> Hostname to write points to. (default: <code>"localhost"</code>)</p>
<p><code>:port</code> API port number. (default: <code>8086</code>)</p>
<p><code>:username</code> Database user to authenticate as. (optional)</p>
<p><code>:password</code> Password to authenticate with. (optional)</p>
<p><code>:insecure</code> If scheme is https and certficate is self-signed. (optional)</p>
<p>See <code>influxdb-8</code> and <code>influxdb-9</code> for version-specific options.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.2.12/src/riemann/influxdb.clj#L186">view source</a></div></div><div class="public anchor" id="var-influxdb-8"><h3>influxdb-8</h3><div class="usage"><code>(influxdb-8 opts)</code></div><div class="doc"><div class="markdown"><p>Returns a function which accepts an event, or sequence of events, and sends it to InfluxDB. Compatible with the 0.8.x series.</p>
<p>; For giving series name as the concatenation of :host and :service fields ; with dot separator.</p>
<p>(influxdb-8 {:host “play.influxdb.org”  :port 8086  :series #(str (:host %) “.” (:service %))})</p>
<p>0.8 Options:</p>
<p>:name Name of the metric which is same as the series name.</p>
<p>:series Function which takes an event and returns the InfluxDB series  name to use. Defaults to :service. If this function returns  nil, series names default to “riemann-events”.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.2.12/src/riemann/influxdb.clj#L87">view source</a></div></div><div class="public anchor" id="var-influxdb-9"><h3>influxdb-9</h3><div class="usage"><code>(influxdb-9 opts)</code></div><div class="doc"><div class="markdown"><p>Returns a function which accepts an event, or sequence of events, and writes them to InfluxDB. Compatible with the 0.9.x series. (influxdb-9 {:host “influxdb.example.com”  :db “my_db”  :retention “raw”  :tag-fields #{:host :sys :env}}) 0.9 Options: <code>:retention</code> Name of retention policy to use. (optional) <code>:tag-fields</code> A set of event fields to map into InfluxDB series tags.  (default: <code>#{:host}</code>) <code>:tags</code> A common map of tags to apply to all points. (optional) <code>:timeout</code> HTTP timeout in milliseconds. (default: <code>5000</code>)</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.2.12/src/riemann/influxdb.clj#L143">view source</a></div></div><div class="public anchor" id="var-kv-encode-9"><h3>kv-encode-9</h3><div class="usage"><code>(kv-encode-9 kv)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.2.12/src/riemann/influxdb.clj#L20">view source</a></div></div><div class="public anchor" id="var-lineprotocol-encode-9"><h3>lineprotocol-encode-9</h3><div class="usage"><code>(lineprotocol-encode-9 event)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.2.12/src/riemann/influxdb.clj#L28">view source</a></div></div><div class="public anchor" id="var-replace-disallowed-9"><h3>replace-disallowed-9</h3><div class="usage"><code>(replace-disallowed-9 field)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.2.12/src/riemann/influxdb.clj#L17">view source</a></div></div><div class="public anchor" id="var-special-fields"><h3>special-fields</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>A set of event fields in Riemann with special handling logic.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.2.12/src/riemann/influxdb.clj#L13">view source</a></div></div></div></body></html>